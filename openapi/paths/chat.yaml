post:
  tags: ["Chat"]
  operationId: create
#  x-speakeasy-name-override: create
  summary: å‘èµ·å¯¹è¯
  description: |
      åˆ›å»ºä¸€ä¸ªèŠå¤©è¡¥å…¨è¯·æ±‚ã€‚
      æ”¯æŒï¼šå¤šæ¨¡å‹å®¹ç¾ã€å·¥å…·è°ƒç”¨ (Function Calling)ã€JSON æ¨¡å¼ã€æµå¼å“åº”åŠç”¨é‡ç»Ÿè®¡ã€‚

  requestBody:
    required: true
    content:
      application/json:
        schema:
          # å¼•ç”¨ chat.yaml
          $ref: "../components/schemas/chat.yaml#/CreateChatCompletionRequest"

  responses:
    # âœ… 200 OK
    '200':

      description: Success
      headers:
        X-Request-ID:
          description: Unique request ID
          schema: {type: string}
      content:
        application/json:
          schema:
            $ref: '../components/schemas/chat.yaml#/ChatCompletionResponse'

        # æƒ…å†µ 2: æµå¼å“åº” (stream=true)
        # å¿…é¡»æ·»åŠ  text/event-streamï¼ŒSpeakeasy æ‰ä¼šç”Ÿæˆæµå¼å¤„ç†è¾…åŠ©ä»£ç 
        text/event-stream:
          # x-speakeasyé…ç½®å¿…é¡»å’Œ schema å¹³çº§ï¼Œä¸èƒ½åœ¨ schema é‡Œé¢
          x-speakeasy-sse-sentinel: "[DONE]"

          schema:
            $ref: '../components/schemas/chat.yaml#/ChatCompletionStreamEvent'

    # âŒ 400 Bad Request
    '400':
      description: Bad Request
      headers:
        X-Request-ID: {schema: {type: string}}
      content:
        application/json:
          schema:
            $ref: '../components/schemas/error.yaml#/BadRequestError'

    # âŒ 401 Unauthorized
    '401':
      description: Unauthorized
      headers:
        X-Request-ID: {schema: {type: string}}
      content:
        application/json:
          schema:
            $ref: '../components/schemas/error.yaml#/AuthenticationError'

    # âŒ 403 Forbidden
    '403':
      description: Forbidden
      headers:
        X-Request-ID: {schema: {type: string}}
      content:
        application/json:
          schema:
            $ref: '../components/schemas/error.yaml#/PermissionDeniedError'

    # âŒ 404 Not Found
    '404':
      description: Not Found
      headers:
        X-Request-ID: {schema: {type: string}}
      content:
        application/json:
          schema:
            $ref: '../components/schemas/error.yaml#/NotFoundError'

    # âŒ 429 Rate Limit (å¸¦é‡è¯•)
    '429':
      description: Rate Limit Exceeded
      headers:
        X-Request-ID: {schema: {type: string}}
        X-RateLimit-Reset: {schema: {type: integer}}
      content:
        application/json:
          schema:
            $ref: '../components/schemas/error.yaml#/RateLimitError'
      # ğŸŒŸ Speakeasy è‡ªåŠ¨é‡è¯•é…ç½®
      x-speakeasy-retries:
        strategy: backoff
        backoff:
            initialInterval: 500
            maxInterval: 60000
            exponent: 1.5
        statusCodes: [ 429, 500, 502, 503, 504 ]


    # âŒ 5XX Server Errors (å¸¦é‡è¯•)
    '500':
      description: Internal Server Error
      content:
        application/json:
          schema:
            $ref: '../components/schemas/error.yaml#/InternalServerError'

    '502':
      description: Bad Gateway
      content:
        application/json:
          schema:
            $ref: '../components/schemas/error.yaml#/InternalServerError'

    '503':
      description: Service Unavailable
      content:
        application/json:
          schema:
            $ref: '../components/schemas/error.yaml#/InternalServerError'